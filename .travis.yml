language: go
sudo: false

go:
  - "1.18"
  - "1.19"
  - "1.20"
  - "tip"

before_install:
  - export PATH=$HOME/gopath/bin:$PATH
  - go install github.com/mattn/goveralls@latest

script:
  - go test -race --shuffle=on ./...
  - go test -coverprofile=coverage.out -cover ./...
  - goveralls -coverprofile=coverage.out -service=travis-ci

matrix:
  allow_failures:
   - go: tip

git:
  depth: 10
